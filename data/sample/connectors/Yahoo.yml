category: Trading Platforms
id: Yahoo
name: Yahoo
display: Yahoo Integration
version: -1
description: An Integration to Query Stock Information
image: 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

parameters:
- name: url
  display: URL
  required: true
  type: string
  hidden: false
- name: apiID
  display: API ID
  required: true
  type: string
  hidden: false
- name: apiSecret
  display: API Secret
  required: false
  type: string
  hidden: false
- name: insecure
  display: Validate SSL
  required: false
  type: boolean
  hidden: false
- name: proxy
  display: Use Proxy
  required: false
  type: boolean
  hidden: false
connector:
  commands:
  - name: yahoo-get-account-information
    deprecated: false
    description: Get Alpaca Account Information
    execution: false
    outputs:
    - contextPath: Alpaca.Account
      description: Alpaca Acount Information
      type: String
  code: |-
    import urllib3

    from lib.common import BaseClient
    import lib.mock as wave


    # Disable insecure warnings
    urllib3.disable_warnings()


    ''' CONSTANTS '''


    CONNECTOR_NAME = 'Alpaca'


    '''
    Classes
    '''


    class Client(BaseClient):

        def __init__(self, api_id: str, api_secret: str, base_url: str, verify=False, proxy=False,
                     ok_codes=(200, 201, 204), headers=None, auth=None):
            super(Client, self).__init__(base_url, verify, proxy, ok_codes, headers, auth)
            self.api_id = api_id
            self.api_secret = api_secret
            self.headers = {
                "APCA-API-KEY-ID": api_id,
                "APCA-API-SECRET-KEY": api_id
            }


        def get_clock(self):
            wave.info('Getting Clock Value')
            res = self._http_request(
                "GET",
                url_suffix='/v2/clock',
                resp_type="json",
                headers=self.headers
            )
            return res

        def get_account_information(self):
            wave.info('Getting Account Information')
            res = self._http_request(
                "GET",
                url_suffix='/v2/account',
                resp_type="json",
                headers=self.headers
            )
            return res

        def get_last_trade(self,ticker):
            wave.info('Getting Last Trade Information')
            res = self._http_request(
                "GET",
                url_suffix='/v1/last/stocks/'+ticker,
                resp_type="json",
                headers=self.headers
            )
            return res

        def get_candlesticks(self, ticker, timeframe="1D", limit="100", start=None, end=None, after=None, until=None):
            wave.info('Getting Price Candlesticks')
            params = {
                "symbols": ticker,
                "limit": limit
            }
            if start is not None and after is not None:
                wave.error("Start and After filters cannot be used in one query")
            if until is not None and end is not None:
                wave.error("Until and End filters cannot be used in one query")

            if start is not None:
                params['start'] = start
            if end is not None:
                params['end'] = end
            if after is not None:
                params['after'] = after
            if until is not None:
                params['until'] = until

            res = self._http_request(
                "GET",
                url_suffix=f'/v1/bars/{timeframe}',
                resp_type="json",
                headers=self.headers,
                params=params
            )
            return res

        def get_last_quote(self, ticker):
            wave.info('Getting Last Quote Information')
            res = self._http_request(
                "GET",
                url_suffix='/v1/last_quote/stocks/'+ticker,
                resp_type="json",
                headers=self.headers
            )
            return res

        def get_orders(self, status=None, limit=None, until=None, after=None, direction=None, nested=None):
            wave.info('Getting Orders Information')
            params = {}

            if status is not None:
                params['status'] = status
            if limit is not None:
                params['limit'] = limit
            if until is not None:
                params['until'] = until
            if after is not None:
                params['after'] = after
            if direction is not None:
                params['direction'] = direction
            if nested is not None:
                params['nested'] = nested

            res = self._http_request(
                "GET",
                url_suffix='/v2/orders',
                resp_type="json",
                headers=self.headers,
                params=params
            )
            return res

        def submit_order(self, status=None, limit=None, until=None, after=None, direction=None, nested=None):
            wave.info('Getting Orders Information')
            params = {}

            if status is not None:
                params['status'] = status
            if limit is not None:
                params['limit'] = limit
            if until is not None:
                params['until'] = until
            if after is not None:
                params['after'] = after
            if direction is not None:
                params['direction'] = direction
            if nested is not None:
                params['nested'] = nested

            res = self._http_request(
                "GET",
                url_suffix='/v2/orders',
                resp_type="json",
                headers=self.headers,
                params=params
            )
            return res


    '''
    Commands
    '''


    def test_connector(client):
        res = client.get_clock()
        if res['is_open'] == 'true' or 'false':
            return 'ok'
        else:
            return 'Failed to connect to the API'


    def get_account_info(client):
        raw_response = client.get_account_information()

        if raw_response:
            raws = alpaca_ec = raw_response
        else:
            return f'{CONNECTOR_NAME} - Could not find any Accounts'

        context_entry = {
            "Alpaca.Account": alpaca_ec
        }

        human_readable = context_entry
        return [human_readable, context_entry, raws]


    def get_last_trade(client, args):
        raw_response = client.get_last_trade(args['ticker'])
        if raw_response:
            raws = raw_response
            alpaca_ec ={
                "Ticker": raw_response['symbol'],
                "Price": raw_response['last']['price'],
                "Size": raw_response['last']['size'],
                "Exchange": raw_response['last']['exchange'],
                "TimeStamp": raw_response['last']['timestamp']
            }
        else:
            return f'{CONNECTOR_NAME} - Could not Get The Last Trade Information'

        context_entry = {
            "Alpaca.Stock.LastTrade(val.Ticker && val.Ticker == obj.Ticker)": alpaca_ec
        }

        human_readable = context_entry
        return [human_readable, context_entry, raws]


    def get_candlesticks(client, args):
        raws=[]
        alpaca_ec=[]
        title = f'{CONNECTOR_NAME} - Price Candlesticks'
        raw_response = client.get_candlesticks(timeframe=args.get('timeframe'), ticker=args.get('ticker'), limit=args.get('limit'),
                                               start=args.get('start'), end=args.get('end'), after=args.get('after'),
                                               until=args.get('until'))
        if raw_response:
            for candle in raw_response[args.get('ticker')]:
                raws.append(candle)
                alpaca_ec.append({
                    "Time": candle['t'],
                    "Open": candle['o'],
                    "High": candle['h'],
                    "Low": candle['l'],
                    "Close": candle['c'],
                    "Volume": candle['v']
                })
        else:
            return f'{CONNECTOR_NAME} - Could not Get The CandleSticks'

        context_entry = {
            "Alpaca.Stock.CandleSticks": alpaca_ec
        }

        human_readable = context_entry
        return [human_readable, context_entry, raws]


    def get_last_quote(client, args):
        raw_response = client.get_last_quote(args['ticker'])
        if raw_response:
            raws = raw_response
            alpaca_ec ={
                "Ticker": raw_response['symbol'],
                "AskPrice": raw_response['last']['askprice'],
                "AskSize": raw_response['last']['asksize'],
                "AskExchange": raw_response['last']['askexchange'],
                "BidPrice": raw_response['last']['bidprice'],
                "BidSize": raw_response['last']['bidsize'],
                "BidExchange": raw_response['last']['bidexchange'],
                "TimeStamp": raw_response['last']['timestamp']
            }
        else:
            return f'{CONNECTOR_NAME} - Could not Get The Last Quote Information'

        context_entry = {
            "Alpaca.Stock.LastQuote(val.Ticker && val.Ticker == obj.Ticker)": alpaca_ec
        }

        human_readable = context_entry
        return [human_readable, context_entry, raws]


    def get_orders(client, args):
        raws=[]
        alpaca_ec=[]
        raw_response = client.get_orders(status=args.get('status'), limit=args.get('limit'), until=args.get('until'),
                                         after=args.get('after'), direction=args.get('direction'), nested=args.get('nested'))
        if raw_response:
            for order in raw_response:
                raws.append(order)
                alpaca_ec.append({
                    "OrderID": order.get('id'),
                    "SubmitedAt": order.get('submitted_at'),
                    "CreatedAt": order.get('created_at'),
                    "UpdatedAt": order.get('updated_at'),
                    "FilledAt": order.get('filled_at'),
                    "Ticker": order.get('symbol'),
                    "Quantity": order.get('qty'),
                    "FilledQuantity": order.get('filled_qty'),
                    "Type": order.get('type'),
                    "Side": order.get('side'),
                    "TimeInForce": order.get('time_in_force'),
                    "LimitPrice": order.get('limit_price'),
                    "StopPrice": order.get('stop_price'),
                    "FilledAVGPrice": order.get('filled_avg_price'),
                    "Status": order.get('status'),
                    "ExtendedHours": order.get('extended_hours'),
                    "Legs": order.get('legs')
                })
        else:
            return (f'{CONNECTOR_NAME} - No Orders Found',{},{})

        context_entry = {
            "Alpaca.Orders(val.OrderID && val.OrderID == obj.OrderID)": alpaca_ec
        }

        human_readable = context_entry
        return [human_readable, context_entry, raws]


    def submit_order(client, args):
        raws=[]
        alpaca_ec=[]
        raw_response = client.submit_order(ticker=args.get('ticker'), quantity=args.get('quantity'), side=args.get('side'),
                                            type=args.get('type'), time_in_force=args.get('time_in_force'),
                                            limit_price=args.get('limit_price'), stop_price=args.get('stop_price'),
                                            extended_hours=args.get('extended_hours')
                                            , client_order_id=args.get('client_order_id'), order_class=args.get('order_class')
                                            , take_profit=args.get('take_profit'), stop_loss=args.get('stop_loss'))
        if raw_response:
            for order in raw_response:
                raws.append(order)
                alpaca_ec.append({
                    "OrderID": order.get('id'),
                    "SubmitedAt": order.get('submitted_at'),
                    "CreatedAt": order.get('created_at'),
                    "UpdatedAt": order.get('updated_at'),
                    "FilledAt": order.get('filled_at'),
                    "Ticker": order.get('symbol'),
                    "Quantity": order.get('qty'),
                    "FilledQuantity": order.get('filled_qty'),
                    "Type": order.get('type'),
                    "Side": order.get('side'),
                    "TimeInForce": order.get('time_in_force'),
                    "LimitPrice": order.get('limit_price'),
                    "StopPrice": order.get('stop_price'),
                    "FilledAVGPrice": order.get('filled_avg_price'),
                    "Status": order.get('status'),
                    "ExtendedHours": order.get('extended_hours'),
                    "Legs": order.get('legs')
                })
        else:
            return (f'{CONNECTOR_NAME} - No Orders Found',{},{})

        context_entry = {
            "Alpaca.Orders(val.OrderID && val.OrderID == obj.OrderID)": alpaca_ec
        }

        human_readable = context_entry
        return [human_readable, context_entry, raws]


    def main():

        params = wave.params()
        api_id = params.get('id')
        api_secret = params.get('secret')
        account_url = params['account_url'][:-1] if (params['account_url'] and params['account_url'].endswith('/')) else params['account_url']
        data_url = params['data_url'][:-1] if (params['data_url'] and params['data_url'].endswith('/')) else params['data_url']

        verify_certificate = not params.get('insecure', False)
        proxy = params.get('proxy', False)

        wave.debug(f'Command being called is {wave.command()}')

        try:
            account_client = Client(
                base_url=account_url,
                verify=verify_certificate,
                proxy=proxy,
                ok_codes=(200, 201, 204),
                headers={'accept': "application/json"},
                api_id=api_id,
                api_secret=api_secret
            )

            data_client = Client(
                base_url=data_url,
                verify=verify_certificate,
                proxy=proxy,
                ok_codes=(200, 201, 204),
                headers={'accept': "application/json"},
                api_id=api_id,
                api_secret=api_secret
            )

            if wave.command() == 'test-connector':
                result = test_connector(account_client)
                wave.results(result)

            elif wave.command() == 'alpaca-get-account-information':
                result = get_account_info(account_client)
                wave.results(*result)

            elif wave.command() == 'alpaca-get-last-trade':
                result = get_last_trade(data_client, wave.args())
                wave.results(*result)

            elif wave.command() == 'alpaca-get-candlesticks':
                result = get_candlesticks(data_client, wave.args())
                wave.results(*result)

            elif wave.command() == 'alpaca-get-last-quote':
                result = get_last_quote(data_client, wave.args())
                wave.results(*result)

            elif wave.command() == 'alpaca-get-orders':
                result = get_orders(account_client, wave.args())
                wave.results(*result)

            elif wave.command() == 'alpaca-submit-order':
                result = submit_order(account_client,args=wave.args())
                wave.results(*result)

        except Exception as e:
            wave.error(str(f'Failed to execute {wave.command()} command. Error: {str(e)}'))


    if __name__ in ('__main__', '__builtin__', 'builtins'):
        main()
  dockerimage: wave/alpaca:1.0
  feed: false
  running: false